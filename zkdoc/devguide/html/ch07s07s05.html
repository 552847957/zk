<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Live Data</title><link rel="stylesheet" href="devguide.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.73.0"><link rel="start" href="index.html" title="ZK Developer's Guide"><link rel="up" href="ch07s07.html" title="Grids"><link rel="prev" href="ch07s07s04.html" title="Sorting"><link rel="next" href="ch07s07s06.html" title="Auxiliary Headers"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Live Data</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch07s07s04.html">Prev</a> </td><th width="60%" align="center">Grids</th><td width="20%" align="right"> <a accesskey="n" href="ch07s07s06.html">Next</a></td></tr></table><hr></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a name="id482189"></a>Live Data</h3></div></div></div><p>Like list boxes, grids support the live data. With live data, developers could separate the data from the view. In other words, developers needs only to provide the data by implementing the org.zkoss.zul.ListModel interface. Rather than manipulating the grid directly. The benefits are two folds.</p><div class="itemizedlist"><ul type="disc"><li><p>It is easier to use different views to show the same set of data.</p></li><li><p>The grid sends the data to the client only if it is visible. It saves a lot of network traffic if the amount of data is huge.</p></li></ul></div><p>There are three steps to use the live data.</p><div class="orderedlist"><ol type="1"><li><p>Prepare the data in the form of ListModel. ZK has a concrete implementation called org.zkoss.zul.SimpleListModel. for representing an array of objects.</p></li><li><p>Implement the org.zkoss.zul.RowRenderer interface for rendering a row of data into the grid.</p></li></ol></div><div class="itemizedlist"><ul type="disc"><li><div class="orderedlist"><ol type="1"><li><p>This is optional. If not specified, the default renderer is used to render the data into the first column.</p></li><li><p>You could implement different renderers for represent the same data in different views.</p></li></ol></div></li></ul></div><div class="orderedlist"><ol type="1"><li><p>Specify the data in the model property, and, optionally, the renderer in the rowRenderer property.</p></li></ol></div><p>In the following example, we prepared a list model called strset, assigned it to a grid through the model property. Then, the grid will do the rest.</p><pre class="programlisting">&lt;window title="Live Grid" border="normal"&gt;<img src="images/100000000000006900000083A11BBF49.png" align="right">    &lt;zscript&gt;            String[] data = new String[30];                for(int j=0; j &amp;lt; data.length; ++j) {                    data[j] = "option "+j;                    }                ListModel strset = new SimpleListModel(data);            &lt;/zscript&gt;        &lt;grid width="100px" height="100px" model="${strset}"&gt;            &lt;columns&gt;                    &lt;column label="options"/&gt;                    &lt;/columns&gt;            &lt;/grid&gt;    &lt;/window&gt;</pre><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a name="id482337"></a>Sorting with Live Data</h4></div></div></div><p>If you allow users to sort a grid provided with live data, you have to implement an interface, org.zkoss.zul.ListModelExt, in addition to org.zkoss.zul.ListModel.</p><pre class="programlisting">class MyListModel implements ListModel, ListModelExt {    public void sort(Comparator cmpr, boolean ascending) {            //do the real sorting                //notify the grid (or listbox) that data is changed by use of ListDataEvent            }    }</pre><p>When a user requests the grid to sort, the grid will invoke the sort method of ListModelExt to sort the data. In other words, the sorting is done by the list model, rather than the grid.</p><p>After sorted, the list model shall notify the grid by invoking the onChange method of the org.zkoss.zul.event.ListDataListener instances that are registered to the grid (by the addListDataListener method). In most cases, all data are usually changed, so the list model usually sends the following event:</p><pre class="programlisting">new ListDataEvent(this, ListDataEvent.CONTENTS_CHANGED, -1, -1) </pre></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch07s07s04.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch07s07.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch07s07s06.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Sorting </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Auxiliary Headers</td></tr></table></div></body></html>
