<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Sorting</title><link rel="stylesheet" href="devguide.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.73.0"><link rel="start" href="index.html" title="ZK Developer's Guide"><link rel="up" href="ch07s11.html" title="List Boxes"><link rel="prev" href="ch07s11s08.html" title="List Boxes with Paging"><link rel="next" href="ch07s11s10.html" title="Special Properties"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Sorting</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch07s11s08.html">Prev</a> </td><th width="60%" align="center">List Boxes</th><td width="20%" align="right"> <a accesskey="n" href="ch07s11s10.html">Next</a></td></tr></table><hr></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a name="id483649"></a>Sorting</h3></div></div></div><p>List boxes support sorting of list items directly. There are a few ways to enable the sorting of a particular column. The simplest way is to set the sort property of the list header to auto as follows. Then, the column that the list header is associated with is sortable based on the label of each list cell of the specified column.</p><pre class="programlisting">&lt;zk&gt;<img src="images/10000000000000CF0000005D419F9D95.png" align="right">    &lt;listbox width="200px"&gt;            &lt;listhead&gt;                    &lt;listheader label="name" sort="auto"/&gt;                        &lt;listheader label="gender" sort="auto"/&gt;                    &lt;/listhead&gt;                &lt;listitem&gt;                    &lt;listcell label="Mary"/&gt;                        &lt;listcell label="FEMALE"/&gt;                    &lt;/listitem&gt;                &lt;listitem&gt;                    &lt;listcell label="John"/&gt;                        &lt;listcell label="MALE"/&gt;                    &lt;/listitem&gt;                &lt;listitem&gt;                    &lt;listcell label="Jane"/&gt;                        &lt;listcell label="FEMALE"/&gt;                    &lt;/listitem&gt;                &lt;listitem&gt;                    &lt;listcell label="Henry"/&gt;                        &lt;listcell label="MALE"/&gt;                    &lt;/listitem&gt;                    &lt;/listbox&gt;            &lt;/zk&gt;</pre><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a name="id483702"></a>The sortAscending and sortDescending Properties</h4></div></div></div><p>If you prefer to sort list items in different ways, you can assign a java.util.Comparator instance to the sortAscending and/or sortDescending property. Once assigned, the list items can be sorted in the ascending and/or descending order with the comparator you assigned.</p><p>The invocation of the sort property with auto actually assign two comparators to the sortAsceding and sortDescending automatically. You can override any of them by assigning another comparator to it.</p><p>For example, assume you want to sort based on the value of list items, rather than list cell's label, then you assign an instance of ListitemComparator to these properties as follows.</p><pre class="programlisting">&lt;zscript&gt;    Comparator asc = new ListitemComarator(-1, true, true);        Comparator dsc = new ListitemComarator(-1, false, true);    &lt;/zscript&gt;&lt;listbox&gt;    &lt;listhead&gt;            &lt;listheader sortAscending="${asc}" sortDescending="${dsc}"/&gt;        ...</pre></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a name="id483740"></a>The sortDirection Property</h4></div></div></div><p>The sortDirection property controls whether to show an icon at the client to indicate the order of the particular column. If list items are sorted before adding to the list box, you shall set this property explicitly.</p><pre class="programlisting">&lt;listheader sortDirection="ascending"/&gt;</pre><p>Then, it is maintained automatically by list boxes as long as you assign the comparator to the corresponding list header.</p></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a name="id483765"></a>The onSort Event</h4></div></div></div><p>When you assign at least one comparator to a list header, an onSort event is sent to the server if user clicks on it. The list header implements a listener to handle the sorting automatically.</p><p>If you prefer to handle it manually, you can add your listener to the list header for the onSort event. To prevent the default listener to invoke the sort method, you have to call the stopPropagation method against the event being received. Alternatively, you can override the sort method, see below.</p></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a name="id483784"></a>The sort Method</h4></div></div></div><p>The sort method is the underlying implementation of the default onSort event listener. It is also useful if you wan to sort the list items by Java codes. For example, you might have to call this method after adding items (assuming not in the proper order).</p><pre class="programlisting">new Listem("New Stuff").setParent(listbox);if (!"natural".header.getSortDirection())    header.sort("ascending".equals(header.getSortDirection()));    </pre><p>The default sorting algorithm is quick-sort (by use of the sort method from the org.zkoss.zk.ui.Components class). You might override it with your own implementation, or listen to the onSort event as described in the previous section.</p><p>Tip: Sorting huge number of live data might degrade the performance significantly. It is better to intercept the onSort event or the sort method to handle it effectively. Refer to the Sort Live Data section below.</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch07s11s08.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch07s11.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch07s11s10.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">List Boxes with Paging </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Special Properties</td></tr></table></div></body></html>
