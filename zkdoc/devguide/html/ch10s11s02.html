<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Configure web.xml and zk.xml</title><link rel="stylesheet" href="devguide.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.73.0"><link rel="start" href="index.html" title="ZK Developer's Guide"><link rel="up" href="ch10s11.html" title="Richlets"><link rel="prev" href="ch10s11s01.html" title="Implement the org.zkoss.zk.ui.Richlet interface"><link rel="next" href="ch10s12.html" title="Session Timeout Management"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Configure web.xml and zk.xml</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch10s11s01.html">Prev</a> </td><th width="60%" align="center">Richlets</th><td width="20%" align="right"> <a accesskey="n" href="ch10s12.html">Next</a></td></tr></table><hr></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a name="id492487"></a>Configure web.xml and zk.xml</h3></div></div></div><p>After implementing the richlet, you can define the richlet in zk.xml with the following statement.</p><pre class="programlisting">&lt;richlet&gt;        &lt;richlet-name&gt;Test&lt;/richlet-name&gt;&lt;richlet-class&gt;org.zkoss.zkdemo.TestRichlet&lt;/richlet-class&gt;        &lt;/richlet&gt;</pre><p>Once declaring a richlet, you can map it to any number of URL by use of richlet-mapping as depicted below.</p><pre class="programlisting">&lt;richlet-mapping&gt;    &lt;richlet-name&gt;Test&lt;/richlet-name&gt;        &lt;url-pattern&gt;/test&lt;/url-pattern&gt;    &lt;/richlet-mapping&gt;&lt;richlet-mapping&gt;    &lt;richlet-name&gt;Test&lt;/richlet-name&gt;        &lt;url-pattern&gt;/some/more/*&lt;/url-pattern&gt;    &lt;/richlet-mapping&gt;</pre><p>By default, richlets is disabled. To enable richlets, you have to add the following declaration to web.xml. Once enabled, you can add as many as richlets you want without modifying web.xml anymore.</p><pre class="programlisting">&lt;servlet-mapping&gt;&lt;servlet-name&gt;zkLoader&lt;/servlet-name&gt;&lt;url-pattern&gt;/zk/*&lt;/url-pattern&gt;&lt;/servlet-mapping&gt;        </pre><p>Then, you can visit <a class="ulink" href="http://localhost/zk/test" target="_top">http://localhost/</a>
<a class="ulink" href="http://localhost/zk/test" target="_top">zk</a>
<a class="ulink" href="http://localhost/zk/test" target="_top">/test</a> to request the richlet.</p><p>The URL specified in the url-pattern element must start with /. If the URI ends with /*, then it is matched to all request with the same prefix. To retrieve the real request, you can check the value returned by the getRequestPath method of the current page.</p><pre class="programlisting">public void service(Page page) {    if ("/some/more/hi".equals(page.getRequestPath()) {            ...            }}    </pre><p>Tip: By specifying /* to url-pattern, you can map all unmatched URL to the mapped richlet.</p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch10s11s01.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch10s11.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch10s12.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Implement the org.zkoss.zk.ui.Richlet interface </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Session Timeout Management</td></tr></table></div></body></html>
