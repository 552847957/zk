<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>The onClientInfo Event</title><link rel="stylesheet" href="devguide.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.73.0"><link rel="start" href="index.html" title="ZK Developer's Guide"><link rel="up" href="ch10s04.html" title="Browser's Information and Controls"><link rel="prev" href="ch10s04.html" title="Browser's Information and Controls"><link rel="next" href="ch10s04s02.html" title="The org.zkoss.ui.util.Clients Class"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">The onClientInfo Event</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch10s04.html">Prev</a> </td><th width="60%" align="center">Browser's Information and Controls</th><td width="20%" align="right"> <a accesskey="n" href="ch10s04s02.html">Next</a></td></tr></table><hr></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a name="id491295"></a>The onClientInfo Event</h3></div></div></div><p>Sometimes an application needs to know the client's information, such as time zone. Then, you can add an event listener for the onClientInfo event. Once the event is added, the client will send back an instance of the org.zkoss.zk.ui.event.ClientInfoEvent class, from which you can retrieve the information of the client.</p><pre class="programlisting">&lt;grid onClientInfo="onClientInfo(event)"&gt;    &lt;rows&gt;            &lt;row&gt;Time Zone &lt;label id="tm"/&gt;&lt;/row&gt;                &lt;row&gt;Screen &lt;label id="scrn"/&gt;&lt;/row&gt;            &lt;/rows&gt;                        &lt;zscript&gt;        void onClientInfo(ClientInfoEvent evt) {            tm.setValue(evt.getTimeZone().toString());                scrn.setValue(                    evt.getScreenWidth()+"x"+evt.getScreenHeight()+"x"+evt.getColorDepth());                }        &lt;/zscript&gt;    &lt;/grid&gt;</pre><p>Note: The onClientInfo event is meaningful only to the root component (aka., a component without any parent).</p><p>The client information is not stored by ZK, so you have to store it manually if necessary. Since a session is associated with the same client, you can store the client info in the session's attribute.</p><pre class="programlisting">session.setAttribute("px_preferred_time_zone", event.getTimeZone());</pre><p>Notice that, if you store a time zone as a session variable called px_preferred_time_zone, then its value will be used as the default time zone thereafter. Refer to the Time Zone section in the Internationalization chapter.</p><p>Notice that the onClientInfo event is sent from the client after the page is rendered (and sent to the client). Thus, if some of your component's data depends on the client's info, say, time zone, you might have to ask the client to re-send the request as follows.</p><pre class="programlisting">import org.zkoss.util.TimeZones;...if (!TimeZones.getCurrent().equals(event.getTimeZone())    Executions.sendRedirect(null);    </pre></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch10s04.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch10s04.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch10s04s02.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Browser's Information and Controls </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> The org.zkoss.ui.util.Clients Class</td></tr></table></div></body></html>
