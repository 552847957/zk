<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Reference to a Component</title><link rel="stylesheet" href="devguide.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.73.0"><link rel="start" href="index.html" title="ZK Developer's Guide"><link rel="up" href="ch07s19.html" title="Client Side Actions"><link rel="prev" href="ch07s19.html" title="Client Side Actions"><link rel="next" href="ch07s19s02.html" title="The onshow and onhide Actions"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Reference to a Component</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch07s19.html">Prev</a> </td><th width="60%" align="center">Client Side Actions</th><td width="20%" align="right"> <a accesskey="n" href="ch07s19s02.html">Next</a></td></tr></table><hr></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a name="id486849"></a>Reference to a Component</h3></div></div></div><p>In the JavaScript codes, you can reference to a component or other objects with the late-binding EL expression. The late-binding EL expression starts with #{ and ending with } as depicted below.</p><pre class="programlisting">&lt;button action="onmouseover: action.show(#{parent.tip})"/&gt;</pre><p>The late-binding EL expressions are evaluated as late as the Rendering Phase. On the other hand, if you assign an EL expression starting with ${, it will be evaluated at the Component Creation Phase, before assigning to the action property. For example,</p><pre class="programlisting">&lt;button action="onfocus: action.show(${tip}); onblur: action.hide(${tip})"/&gt;&lt;div id="tip" visible="false"&gt;...&lt;/div&gt;</pre><p>will be evaluated to</p><pre class="programlisting">&lt;button action="onfocus: action.show(); onblur: action.hide()"/&gt;&lt;div id="tip" visible="false"&gt;...&lt;/div&gt;</pre><p>since the tip component is not created when assigning the action property.</p><p>Even if the referenced component was created before action is assigned, it is still incorrect, since the ZUML loader has no knowledge of CSA, and it converts the component to a string by invoking the toString method.</p><p>Of course, it doesn't prevent you from using ${} in an action, as depicted below. Just remember it is evaluated before assigning the action property.</p><pre class="programlisting">&lt;variables myaction="onfocus: action.show(#{tip}); onblur: action.hide(#{tip});"&lt;button action="${myaction} onmouseover: action.show(#{parent.parent.tip})"/&gt;</pre><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a name="id486924"></a>An onfocus and onblur Example</h4></div></div></div><p>In the following example, we demonstrated how to use client-side actions to provide on-line help. When user change the focus to any of the text boxes, a help message is displayed accordingly.</p><pre class="programlisting">&lt;grid&gt;    &lt;columns&gt;    <img src="images/1000000000000164000000379E269FE3.png" align="right">        &lt;column/&gt;                &lt;column/&gt;                &lt;column/&gt;            &lt;/columns&gt;        &lt;rows&gt;            &lt;row&gt;        &lt;label value="text1: "/&gt;&lt;textbox action="onfocus: action.show(#{help1}); onblur: action.hide(#{help1})"/&gt;&lt;label id="help1" visible="false" value="This is help for text1."/&gt;        &lt;/row&gt;                &lt;row&gt;        &lt;label value="text2: "/&gt;&lt;textbox action="onfocus: action.show(#{help2}); onblur: action.hide(#{help2})"/&gt;&lt;label id="help2" visible="false" value="This is help for text2."/&gt;        &lt;/row&gt;            &lt;/rows&gt;    &lt;/grid&gt;</pre></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a name="id486960"></a>Coercion Rules</h4></div></div></div><p>A ZUL component actually converts an EL expression (#{}) to proper JavaScript codes based on the class of the result object.</p><div class="orderedlist"><ol type="1"><li><p>If result is null, it is replaced with null.</p></li><li><p>If result is a component, it is replaced with $e('uuid'), where $e is a JavaScript function to return a reference to a HTML tag and uuid is the component's UUID.</p></li><li><p>If result is a Date object, it is replaced with new Date(milliseconds).</p></li><li><p>Otherwise, the result is converted to a string by calling the toString method, and then replaced with 'result in string'.</p></li></ol></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch07s19.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch07s19.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch07s19s02.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Client Side Actions </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> The onshow and onhide Actions</td></tr></table></div></body></html>
