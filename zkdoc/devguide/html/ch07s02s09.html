<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Common Dialogs</title><link rel="stylesheet" href="devguide.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.73.0"><link rel="start" href="index.html" title="ZK Developer's Guide"><link rel="up" href="ch07s02.html" title="Windows"><link rel="prev" href="ch07s02s08.html" title="The position Property"><link rel="next" href="ch07s03.html" title=""></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Common Dialogs</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch07s02s08.html">Prev</a> </td><th width="60%" align="center">Windows</th><td width="20%" align="right"> <a accesskey="n" href="ch07s03.html">Next</a></td></tr></table><hr></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a name="id480088"></a>Common Dialogs</h3></div></div></div><p>The XUL component set supports the following common dialogs to simplify some common tasks.</p><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a name="id480096"></a>The Message Box</h4></div></div></div><p>The org.zkoss.zul.Messagebox class provides a set of utilities to show message boxes. It is typically used to alert user when an error occurs, or to prompt user for an decision.</p><pre class="programlisting">if (Messagebox.show("Remove this file?", "Remove?", Messagebox.YES | Messagebox.NO, Messagebox.QUESTION) == Messagebox.YES) {    ...//remove the file    </pre><p>}</p><p>Since it is common to alert user for an error, a global function called alert is added for zscript. The alert function is a shortcut of the show method in the Messagebox class. In other words, The following two statements are equivalent.</p><pre class="programlisting">alert("Wrong");Messagebox.show("Wrong");</pre><p>Notice that Messagebox is a modal window so it shares the same constraint: executable only in an event listener. Thus, the following codes will fail. Refer to the Modal Windows and Event Listeners section above for more descriptions.</p><pre class="programlisting">&lt;window title="Messagebox not allowed in paging loading"&gt;    &lt;zscript&gt;        //failed since show cannot be called in paging loading        if (Messagebox.show("Redirect?", "Redirect?",        Messagebox.YES | Messagebox.NO, Messagebox.QUESTION) == Messagebox.YES)            Executions.sendRedirect("another.zul");            &lt;/zscript&gt;    &lt;/window&gt;</pre></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a name="id480162"></a>The File Upload Dialog</h4></div></div></div><p>The org.zkoss.zul.Fileupload class provides a set of utilities to prompt a user for uploading file(s) from the client to the server. Once of the get methods is called, a file upload dialog is shown at the browser to prompt the user for specifying file(s) for uploading. It won't return until user has uploaded a file or presses the cancel button.</p><pre class="programlisting">&lt;window title="Fileupload Demo" border="normal"&gt;    &lt;image id="image"/&gt;        &lt;button label="Upload"&gt;            &lt;attribute name="onClick"&gt;{                    Object media = Fileupload.get();                        if (media instanceof org.zkoss.image.Image)                            image.setContent(media);                            else if (media != null)                            Messagebox.show("Not an image: "+media, "Error",                                    Messagebox.OK, Messagebox.ERROR);                            }&lt;/attribute&gt;            &lt;/button&gt;    &lt;/window&gt;<img src="images/10000000000002C800000125B9E0AAC1.png" align="right"></pre><div class="sect4" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a name="id480203"></a>Upload Multiple Files at Once</h5></div></div></div><p>If you allow users to upload multiple files at once, you can specify the maximal allowed number as follows.</p><pre class="programlisting">&lt;window title="fileupload demo" border="normal"&gt;    &lt;button label="Upload"&gt;            &lt;attribute name="onClick"&gt;&lt;![CDATA[{            Object media = Fileupload.get(5);        if (media != null)            for (int j = 0; j &lt; media.length; ++j) {                    if (media[j] instanceof org.zkoss.image.Image) {                            Image image = new Image();                                image.setContent(media[j]);                                image.setParent(pics);                            } else if (media[j] != null) {                            Messagebox.show("Not an image: "+media[j], "Error",                                    Messagebox.OK, Messagebox.ERROR);                    <img src="images/100000000000016B000000EAA87608DF.png" align="right">            }                    }                }]]&gt;&lt;/attribute&gt;            &lt;/button&gt;        &lt;vbox id="pics"/&gt;    &lt;/window&gt;</pre></div></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a name="id480251"></a>The fileupload Component</h4></div></div></div><p>The fileupload component is not a modal dialog. Rather, it is a component, so it is placed inline with other components.</p><p>Note: In addition to providing the static get methods for opening the file upload dialogs, org.zkoss.zul.Fileupload itself is a component. It is the so-called fileuplod component.</p><p>
</p><div><img src="images/10000000000001130000004F6BCA5979.png"></div><p>For example,</p><pre class="programlisting">&lt;image id="img"/&gt;Upload your hot shot:&lt;fileupload onUpload="img.setContent(event.media)"/&gt;</pre><div class="sect4" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a name="id480286"></a>The onUpload Event</h5></div></div></div><p>When the Upload button is pressed, the onUpload event is sent with an instance of the org.zkoss.zk.ui.event.UploadEvent event. You can then retreive the content of the upload files by use of the getMedia or getMedias methods.</p><p>Notice that getMedia and getMedias return null to indicate that no file is specified but the Upload button is pressed.</p></div><div class="sect4" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a name="id480302"></a>The onClose Event</h5></div></div></div><p>In addition to onUpload, the onClose event is sent to notify that either the Upload button or the Cancel button is pressed. By default, it simply invalidates the fileupload component, i.e., all fields are cleaned up and redrawn. If you listen to this event to have the custom behavior.</p></div></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a name="id480315"></a>The File Download Dialog</h4></div></div></div><p>The org.zkoss.zul.Filedownload class provides a set of utilities to prompt a user for downloading a file from the server to the client. Unlike the iframe component that displays the file in the browser window, a file download dialog is shown at the browser if one of the save methods is called. Then, the user can specify the location in his local file system to save the file.</p><pre class="programlisting">&lt;button label="Download download.html"&gt;<img src="images/10000000000002AF000001BB582C2DD7.png" align="right">    &lt;attribute name="onClick"&gt;{                    java.io.InputStream is = desktop.getWebApp().getResourceAsStream("/test/download.html");                    if (is != null)    Filedownload.save(is, "text/html", "download.html");    else            alert("/test/download.html not found");            }&lt;/attribute&gt;    &lt;/button&gt;</pre></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch07s02s08.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch07s02.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch07s03.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">The position Property </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> </td></tr></table></div></body></html>
