<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Sorting</title><link rel="stylesheet" href="devguide.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.73.0"><link rel="start" href="index.html" title="ZK Developer's Guide"><link rel="up" href="ch07s07.html" title="Grids"><link rel="prev" href="ch07s07s03.html" title="Grids with Paging"><link rel="next" href="ch07s07s05.html" title="Live Data"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Sorting</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch07s07s03.html">Prev</a> </td><th width="60%" align="center">Grids</th><td width="20%" align="right"> <a accesskey="n" href="ch07s07s05.html">Next</a></td></tr></table><hr></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a name="id482049"></a>Sorting</h3></div></div></div><p>Grids support the sorting of rows directly. To enable the ascending order for a particular column, you assign a java.util.Comparator instance to the sortAscending property of the column. Similarly, you assign a comparator to the sortDescending property to enable the descending order.</p><p>As illustrated below, you first implement a comparator that compares any two rows of the grid, and then assign its instances to the sortAscending and sortDescending properties. Notice: the compare method is called with two org.zkoss.zul.Row instance.</p><pre class="programlisting">&lt;zk&gt;    &lt;zscript&gt;            class MyRowComparator implements Comparator {                    public MyRowComparator(boolean ascending) {                        ...                        }                        public int compare(Object o1, Object o2) {                            Row r1 = (Row)o1, r2 = (Row)o2;                                ....                            }                    }                Comparator asc = new MyRowComparator(true);                Comparator dsc = new MyRowComparator(false);            &lt;/zscript&gt;        &lt;grid&gt;            &lt;columns&gt;                    &lt;column sortAscending="${asc}" sortDescending="${dsc}"/&gt;            ...</pre><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a name="id482089"></a>The sortDirection Property</h4></div></div></div><p>The sortDirection property controls whether to show an icon at the client to indicate the order of a particular column. If rows are sorted before adding to the grid, you shall set this property explicitly.</p><pre class="programlisting">&lt;column sortDirection="ascending"/&gt;</pre><p>Then, it is maintained automatically by grids as long as you assign the comparators to the corresponding column.</p></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a name="id482113"></a>The onSort Event</h4></div></div></div><p>When you assign at least one comparator to a column, an onSort event is sent to the server if user clicks on it. The column component implements a listener to automatically sort rows based on the assigned comparator.</p><p>If you prefer to handle it manually, you can add your own listener to the column for the onSort event. To prevent the default listener to invoke the sort method, you have to call the stopPropagation method against the event being received. Alternatively, you can override the sort method, see below.</p></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a name="id482133"></a>The sort Method</h4></div></div></div><p>The sort method is the underlying implementation of the default onSort event listener. It is also useful if you wan to sort the rows by Java codes. For example, you might have to call this method after adding rows (assuming not in the proper order).</p><pre class="programlisting">Row row = new Row();row.setParent(rows);row.appendChild(...);...if (!"natural".column.getSortDirection())    column.sort("ascending".equals(column.getSortDirection()));    </pre><p>The default sorting algorithm is quick-sort (by use of the sort method from the org.zkoss.zk.ui.Components class). You might override it with your own implementation.</p><p>Note: the sort method checks the sort direction (by calling getSortDirection). It sorts the rows only if the sort direction is different. To enforce the sorting, do as follows.</p><pre class="programlisting">column.setSortDirection("natural");sort(myorder);</pre><p>The above codes are equivalent to the following.</p><pre class="programlisting">sort(myorder, true);</pre></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch07s07s03.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch07s07.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch07s07s05.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Grids with Paging </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Live Data</td></tr></table></div></body></html>
