<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>The zscript Element</title><link rel="stylesheet" href="devguide.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.73.0"><link rel="start" href="index.html" title="ZK Developer's Guide"><link rel="up" href="ch06s08.html" title="ZK Elements"><link rel="prev" href="ch06s08s01.html" title="The zk Element"><link rel="next" href="ch06s08s03.html" title="The attribute Element"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">The zscript Element</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch06s08s01.html">Prev</a> </td><th width="60%" align="center">ZK Elements</th><td width="20%" align="right"> <a accesskey="n" href="ch06s08s03.html">Next</a></td></tr></table><hr></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a name="id476651"></a>The zscript Element</h3></div></div></div><p>&lt;zscript [language="Java"]&gt;Scripting codes&lt;/zscript&gt;&lt;zscript src="uri" [language="Java"]/&gt;</p><p>It defines a piece of the scripting codes, say the Java codes, that will be interpreted when the page is evaluated. The language of the scripting codes is, by default, Java (see below). You can select a different language by use the language attribute.</p><p>The zscript element has two formats as shown above. The first format is used to embed the scripting codes directly in the page. The second format is used to reference an external file that contains the scripting codes.</p><div class="informaltable"><a name="id476678"></a><table border="1"><colgroup><col><col></colgroup><thead><tr><th>
<p>Attribute Name</p>
</th><th>
<p>Description</p>
</th></tr></thead><tbody><tr><td>
<p>src</p>
</td><td>
<p>[Optional][Default: none]</p>
<p>Specifies the URI of the file containing the scripting codes. If specified, the scripting codes will be loaded as if they are embedded directly.</p>
<p>The src attribute supports browser and locale dependent URI. In other words, you can specify ~ or * to denote different context path, browser and locale-dependent information. Refer to the Internationalization chapter for details.</p>
<p>Note: the file shall contain the source codes of the selected language that can be interpreted directly. The encoding must be UTF-8. Don't specify a class file (aka. byte codes).</p>
</td></tr><tr><td>
<p>language</p>
</td><td>
<p>[Optional][Default: Java or as specified in the page directive][Allowed Values: Java | JavaScript | Ruby | Groovy]</p>
<p>It specifies the scripting language in which the scripting codes are written.</p>
</td></tr><tr><td>
<p>deferred</p>
</td><td>
<p>[Optional][Default: false]</p>
<p>Whether to defer the evaluation of this element until the first non-deferred zscript codes of the same language need to be evaluated. Refer to the How to Defer the Evaluation section below.</p>
</td></tr><tr><td>
<p>if</p>
</td><td>
<p>[Optional][Default: true]</p>
<p>Specifies the condition to evaluate this element.</p>
</td></tr><tr><td>
<p>unless</p>
</td><td>
<p>[Optional][Default: false]</p>
<p>Specifies the condition not to evaluate this element.</p>
</td></tr></tbody></table></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a name="id476847"></a>How to Defer the Evaluation</h4></div></div></div><p>ZK loads the interpreter before it is going to evaluate the first zscript codes. For example, the Java interpreter is loaded when the user clicks the button in the following example.</p><pre class="programlisting">&lt;button onClick="alert(&amp;quot;Hi&amp;quot;)"/&gt;</pre><p>On the other hand, the interpreter is loaded when loading the following ZUML page, since the zscript element needs to be evaluated when loading the page.</p><pre class="programlisting">&lt;window&gt;    &lt;zscript&gt;        void add() {        }        &lt;/zscript&gt;        &lt;button onClick="add()"/&gt;    &lt;/window&gt;</pre><p>If you prefer to defer the loading of the interpreter, you can specify the deferred option with true. Then, the interpreter won't be loaded, until the user clicks the button.</p><pre class="programlisting">&lt;window&gt;    &lt;zscript deferred="true"&gt;        void add() {        }        &lt;/zscript&gt;        &lt;button onClick="add()"/&gt;    &lt;/window&gt;</pre><p>Note: The evaluation of EL expressions specified in the if, unless and src attributes are also deferred.</p><p>Note: If the component is detached from the page by the time the interpreter is loaded, the zscript codes are ignored. For example, if the window in the previous example no longer belongs to the page, the deferred zscript won't be interpreted.</p></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a name="id476908"></a>How to Select a Different Scripting Language</h4></div></div></div><p>A page could have scripts in multiple different scripting language.</p><pre class="programlisting">&lt;button onClick="javascript:do_something_in_js()"/&gt;&lt;zscript language="groovy"&gt;do_something_in_Groovy();&lt;/zscript&gt;</pre><p>If the scripting language is omitted, Java is assumed. If you'd like to change the default scripting language, use the page directive as follows.</p><pre class="programlisting">&lt;?page zscriptLanguage="Groovy"?&gt;&lt;zscript&gt;def name = "Hello World!";&lt;/zscript&gt;</pre></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a name="id476943"></a>How to Support More Scripting Languages</h4></div></div></div><p>Currently ZK supports Java, JavaScript, Ruby and Groovy. However, it is easy to extend:</p><div class="orderedlist"><ol type="1"><li><p>Provides a class that implements the org.zkoss.zk.scripting.Interpreter interface. Instead of implementing it directly, you can derive from the org.zkoss.zk.scripting.util.GenericInterpreter class, if you'd like to handle namespaces directly. Or, you can derive from the org.zkoss.scripting.bsh.BSFInterpreter class, if the interpreter supports BSF (Bean Scripting Framework).</p></li><li><p>Declares the scripting language in either WEB-INF/zk.xml, or zk/config.xml.</p></li></ol></div><pre class="programlisting">&lt;zscript-config&gt;    &lt;zscript-language&gt;            &lt;language-name&gt;SuperJava&lt;/language-name&gt;&lt;!-- case insensitive --!&gt;        </pre><p>&lt;interpreter-class&gt;my.MySuperJavaInterpreter&lt;/interpreter-class&gt;</p><pre class="programlisting">&lt;/zscript-language&gt;&lt;/zscript-config&gt;</pre><p>Refer to the Developer's Reference for the details about WEB-INF/zk.xml. Refer to the Component Development Guide for the details about zk/config.xml.</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch06s08s01.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch06s08.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch06s08s03.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">The zk Element </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> The attribute Element</td></tr></table></div></body></html>
