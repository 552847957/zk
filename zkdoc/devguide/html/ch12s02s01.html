<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Three Steps to Generate XML Output with a ZUML Page</title><link rel="stylesheet" href="devguide.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.73.0"><link rel="start" href="index.html" title="ZK Developer's Guide"><link rel="up" href="ch12s02.html" title="XML Output"><link rel="prev" href="ch12s02.html" title="XML Output"><link rel="next" href="ch12s02s02.html" title="The XML Component Set"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Three Steps to Generate XML Output with a ZUML Page</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch12s02.html">Prev</a> </td><th width="60%" align="center">XML Output</th><td width="20%" align="right"> <a accesskey="n" href="ch12s02s02.html">Next</a></td></tr></table><hr></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a name="id494015"></a>Three Steps to Generate XML Output with a ZUML Page</h3></div></div></div><div class="orderedlist"><ol type="1"><li><p>Uses the XML component set (<a class="ulink" href="http://www.zkoss.org/2007/xml" target="_top">http://www.zkoss.org/2007/xml</a>).</p></li><li><p>Maps the file extension to ZK Loader</p></li><li><p>Maps the file extension to the XML component set</p></li></ol></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a name="id494059"></a>Use the XML Component Set, http://www.zkoss.org/2007/xml</h4></div></div></div><p>The XML component set (aka., the XML language, in ZK terminology) is used to generate XML output. Unlike the XUL or XHTML component sets, all unknown<sup>[<a name="id494067" href="#ftn.id494067" class="footnote">59</a>]</sup> tags in a ZUML page are assumed to belong the Native namespace (http://www.zkoss.org/2005/native) rather than throwing an exception. ZK generates them directly to the output without instantiating a ZK component for each of them.</p><p>The following is an example that generates the SVG output. It looks very similar to the XML output you want to generate, except you can use zscript, EL expressions, macro components and other ZK features.</p><p></p><pre class="programlisting">&lt;?page contentType="image/svg+xml;charset=UTF-8"?&gt;<img src="images/100000000000004F00000049ABC5A9E2.png" align="right">&lt;svg width="100%" height="100%" version="1.1" xmlns="http://www.w3.org/2000/svg"xmlns:z="http://www.zkoss.org/2005/zk"&gt;    &lt;z:zscript&gt;&lt;![CDATA[        String[] bgnds = {"purple", "blue", "yellow"};        int[] rads = {30, 25, 20};        ]]&gt;&lt;/z:zscript&gt;        &lt;circle style="fill:${each}" z:forEach="${bgnds}"            cx="${50+rads[forEachStatus.index]}"                cy="${20+rads[forEachStatus.index]}"                r="${rads[forEachStatus.index]}"/&gt;        &lt;/svg&gt; </pre><p>The generated output will be</p><pre class="programlisting">&lt;svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" version="1.1"&gt;&lt;circle style="fill:purple" cx="80" cy="50" r="30"&gt;&lt;/circle&gt;&lt;circle style="fill:blue" cx="75" cy="45" r="25"&gt;&lt;/circle&gt;&lt;circle style="fill:yellow" cx="70" cy="40" r="20"&gt;&lt;/circle&gt;&lt;/svg&gt;</pre><p>where</p><div class="itemizedlist"><ul type="disc"><li><p>The content type is specified with the page directive. For SVG, it is image/svg+xml. The xml processing instruction (&lt;?xml?&gt;) and DOCTYPE of the output are also specified in the page directive. Refer to the Developer's Reference for more about the page directive.</p></li><li><p>All tags in this example, such as svg and circle, are associated with a namespace (http://www.w3.org/2000/svg) that is unknown to ZK Loader. Thus, they are assumed to belong the Native namespace. They are output directly rather than instantiating a ZK component for each of them. Refer to the Native Namespace section int the ZUML with the XUL Component Set chapter for more about the Native namespace.</p></li><li><p>To use zscript, forEach and other ZK specific features, you have to specify the ZK namespace (<a class="ulink" href="http://www.zkoss.org/2005/zk" target="_top">http://www.zkoss.org/2005/zk</a>).</p></li></ul></div></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a name="id494204"></a>Maps the File Extension to ZK Loader</h4></div></div></div><p>To let ZK Loader process the file, you have to associate it with the ZK Loader in WEB-INF/web.xml. In this example, we map all files with the .svg extension to ZK Loader<sup>[<a name="id494215" href="#ftn.id494215" class="footnote">60</a>]</sup>:</p><pre class="programlisting">&lt;servlet-mapping&gt;    &lt;servlet-name&gt;zkLoader&lt;/servlet-name&gt;        &lt;url-pattern&gt;*.svg&lt;/url-pattern&gt;    &lt;/servlet-mapping&gt;</pre></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a name="id494233"></a>Maps the File Extension to the XML Component Set</h4></div></div></div><p>Unless the file extension is .xml, you have to associate it with the XML component set (aka., the XML language) explicitly in WEB-INF/zk.xml. In this example, we map .svg to the XML component set:</p><pre class="programlisting">&lt;language-mapping&gt;    &lt;language-name&gt;xml&lt;/language-name&gt;        &lt;extension&gt;svg&lt;/extension&gt;    &lt;/language-mapping&gt;</pre><p>where xml is the language name of the XML component set (<a class="ulink" href="http://www.zkoss.org/2007/xml" target="_top">http://www.zkoss.org/2007/xml</a>). Thus, when ZK Loader parses a file with the .svg extension, it knows the default language is the XML component set.</p></div><div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p><sup>[<a name="ftn.id494067" href="#id494067" class="para">59</a>] </sup>By the unknown tag we mean a tag that is not associated with a namespace, or the namespace is unknown.</p></div><div class="footnote"><p><sup>[<a name="ftn.id494215" href="#id494215" class="para">60</a>] </sup>We assume ZK Loader (zkLoader) is mapped to org.zkoss.zk.ui.http.DHtmlLayoutServlet.</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch12s02.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch12s02.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch12s02s02.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">XML Output </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> The XML Component Set</td></tr></table></div></body></html>
