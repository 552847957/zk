<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Simplest Way to Use JDBC (but not recommended)</title><link rel="stylesheet" href="devguide.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.73.0"><link rel="start" href="index.html" title="ZK Developer's Guide"><link rel="up" href="ch14.html" title="14. Database Connectivity"><link rel="prev" href="ch14s01.html" title="ZK Is Presentation-Tier Only"><link rel="next" href="ch14s03.html" title="Use with Connection Pooling"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Simplest Way to Use JDBC (but not recommended)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch14s01.html">Prev</a> </td><th width="60%" align="center">14. Database Connectivity</th><td width="20%" align="right"> <a accesskey="n" href="ch14s03.html">Next</a></td></tr></table><hr></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id495279"></a>Simplest Way to Use JDBC (but not recommended)</h2></div></div></div><p>The simplest way to use JDBC, like any JDBC tutorial might suggest, is to use java.sql.DriverManager. Here is an example to store the name and email into a MySQL<sup>[<a name="id495290" href="#ftn.id495290" class="footnote">63</a>]</sup> database.</p><pre class="programlisting">&lt;window title="JDBC demo" border="normal"&gt;    &lt;zscript&gt;&lt;![CDATA[        import java.sql.*;        void submit() {            //load driver and get a database connetion                Class.forName("com.mysql.jdbc.Driver");                Connection conn = DriverManager.getConnection(                    "jdbc:mysql://localhost/test?user=root&amp;password=my-password");                    PreparedStatement stmt = null;                try {                    stmt = conn.prepareStatement("INSERT INTO user values(?, ?)");                        //insert what end user entered into database table                        stmt.set(1, name.value);                        stmt.set(2, email.value);                        //execute the statement                        stmt.executeUpdate();                    } finally { //cleanup                    if (stmt != null) {                            try {                                    stmt.close();                                    } catch (SQLException ex) {                                    log.error(ex); //log and ignore                                    }                            }                        if (conn != null) {                            try {                                    conn.close();                                    } catch (SQLException ex) {                                    log.error(ex); //log and ignore                                    }                            }                    }            }        &lt;/zscript&gt;        &lt;vbox&gt;            &lt;hbox&gt;Name : &lt;textbox id="name"/&gt;&lt;/hbox&gt;                &lt;hbox&gt;Email: &lt;textbox id="email"/&gt;&lt;/hbox&gt;                &lt;button label="submit" onClick="submit()"/&gt;            &lt;/vbox&gt;    &lt;/window&gt;</pre><p>Though simple, it is not recommended. After all, ZK applications are Web-based applications, where loading is unpredictable and treasurable resources such as database connections have to be managed effectively.</p><p>Luckily, all J2EE frameworks and Web servers support a utility called connection pooling. It is straightforward to use, while managing the database connections well. We will discuss more in the next section.</p><p>Tip: Unlike other Web applications, it is possible to use DriverManager with ZK, though not recommended.</p><p>First, you could cache the connection in the desktop, reuse it for each event, and close it when the desktop becomes invalid. It works just like traditional Client/Server applications. Like Client/Server applications, it works efficiently only if there are at most tens concurrent users.</p><p>To know when a desktop becomes invalid, you have to implement a listener by use of org.zkoss.zk.ui.util.DesktopCleanup.</p><div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p><sup>[<a name="ftn.id495290" href="#id495290" class="para">63</a>] </sup>
<a class="ulink" href="http://www.mysql.com/" target="_top">http://www.mysql.com</a>
</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch14s01.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch14.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch14s03.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">ZK Is Presentation-Tier Only </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Use with Connection Pooling</td></tr></table></div></body></html>
