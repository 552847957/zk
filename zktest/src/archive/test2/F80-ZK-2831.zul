<?xml version="1.0" encoding="UTF-8"?>

<!--
F80-ZK-2831.zul

	Purpose:
		
	Description:
		
	History:
		Fri Jul 31 11:09:16 CST 2015, Created by chunfu

Copyright (C)  Potix Corporation. All Rights Reserved.

-->
<zk xmlns:n="native">
	<div>
	<div id="win" viewModel="@id('vm') @init('org.zkoss.zktest.test2.F80_ZK_2831')">
		<label multiline="true">
			1. you should see this page with the same information as follows:
			input -> deferred evaluation
			input -> deferred evaluation in native comp
			label -> deferred evaluation in label
			button -> deferred evaluation in include
			2. click "eval deferred" button
			3. you should one label shows "deferred evaluation in command"
			4. click "update title" button, nothing changes
		</label>
		<div id="host" style="background: red;">
			<n:input type="text" value="#{vm.title}"/>
			<div mytitle="@ref(vm.title)" style="background: grey;">
				<n:input type="text" value="#{mytitle += ' in native comp'}"/>
				<separator></separator>
				<label id="lb" value="#{mytitle += ' in label'}"></label>
				<include mode="instant" src="F80-ZK-2831-1.zul"></include>
				<button id="btn1" onClick="@command('evaluateEL')">eval deferred</button>
			</div>
			<label id="lb2" value="@load(vm.command)"></label>
			<button id="btn2" onClick="@command('updateTitle')">update title</button>

			<separator></separator>

			<if test="@load(not empty vm.title)">
				<div style="background: green;">
					<label id="lb3" value="#{vm.title += ' in shadow'}"></label>
					<n:input type="text" value="#{vm.title += ' in native comp'}"/>
				</div>
			</if>
			<button id="btn3" onClick="@command('emptyTitle')">empty title</button>
		</div>
		<button id="serialize" label="serialize/deserialize" onClick='win.getAttribute("vm").doSerialize(win, msg)' />
		<label id="msg"></label>
	</div>
	</div>
</zk>
