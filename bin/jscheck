#!/bin/bash
nodeChecker=`node -v`
if [ -z "$nodeChecker" ] ; then
	echo "please install node.js"
	exit 1
fi

maindir="$(pwd)"
cd $1

echo "check jscs installation"
jscsChecker="$(npm list jscs)"
if [[ $jscsChecker == *"empty"* ]] ; then
	echo 'installing jscs'
	npm install jscs
fi

echo "check js code style : $maindir/$2"
OUT="$(node_modules/jscs/bin/jscs $maindir/$2 $3 $4)"

if [ ! -z "$OUT" ] ; then
	echo $OUT
	#Coding Style Error found.
	exit 1
fi
cd $maindir
echo "passed"