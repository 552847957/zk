_z='zul.menu';if(!zk.$import(_z)){try{_zkpk=zk.$package(_z);
zPkg.load("zul.wgt");zul.menu.Menubar=zk.$extends(zul.Widget,{_orient:"horizontal",getOrient:function(){return this._orient},setOrient:function(a){if(this._orient!=a){this._orient=a;this.rerender()}},isAutodrop:function(){return this._autodrop},setAutodrop:function(a){if(this._autodrop!=a){this._autodrop=a}},getZclass:function(){return this._zclass==null?"z-menubar"+("vertical"==this.getOrient()?"-ver":"-hor"):this._zclass},unbind_:function(){this._lastTarget=null;this.$supers("unbind_",arguments)},insertChildHTML_:function(c,a,b){if(a){zDom.insertHTMLBefore(a.getSubnode("chdextr"),this.encloseChildHTML_({child:c,vertical:"vertical"==this.getOrient()}))}else{zDom.insertHTMLBeforeEnd(this.getNode(),this.encloseChildHTML_({child:c,vertical:"vertical"==this.getOrient()}))}c.bind_(b)},removeChildHTML_:function(b,a){this.$supers("removeChildHTML_",arguments);zDom.remove(b.uuid+"$chdextr")},encloseChildHTML_:function(c){var b=c.out||[],d=c.child,a=c.vertical;if(a){b.push('<td id="',d.uuid,'$chdextr"');if(d.getHeight()){b.push(' height="',d.getHeight(),'"')}b.push(">")}d.redraw(b);if(a){b.push("</tr>")}if(!c.out){return b.join("")}}});
(_zkwg=_zkpk.Menubar).prototype.className='zul.menu.Menubar';_zkmd={};
_zkmd['default']=function(b){var c=this.uuid;if("vertical"==this.getOrient()){b.push("<div",this.domAttrs_(),'><table id="',c,'$cave"',zUtl.cellps0,">");for(var a=this.firstChild;a;a=a.nextSibling){this.encloseChildHTML_({out:b,child:a,vertical:true})}b.push("</table></div>")}else{b.push("<div",this.domAttrs_(),"><table",zUtl.cellps0,">",'<tr valign="bottom" id="',c,'$cave">');for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}b.push("</tr></table></div>")}};
zkmld(_zkwg,_zkmd);zul.menu.Menu=zk.$extends(zul.LabelImageWidget,{domContent_:function(){var b=zUtl.encodeXML(this.getLabel()),a=this._image;if(!a){a=zAu.comURI("web/img/spacer.gif")}a='<img src="'+a+'" align="absmiddle" class="'+this.getZclass()+'-img"/>';return b?a+" "+b:a},isTopmost:function(){return this._topmost},beforeParentChanged_:function(a){this._topmost=a&&!(a.$instanceof(zul.menu.Menupopup))},getZclass:function(){return this._zclass==null?"z-menu":this._zclass},domStyle_:function(b){var a=this.$supers("domStyle_",arguments);return this.isTopmost()?a+"padding-left:4px;padding-right:4px;":a},onChildAdded_:function(a){this.$supers("onChildAdded_",arguments);if(a.$instanceof(zul.menu.Menupopup)){this.menupopup=a}},onChildRemoved_:function(a){this.$supers("onChildRemoved_",arguments);if(a==this.menupopup){this.menupopup=null}},getMenubar:function(){for(var a=this.parent;a;a=a.parent){if(a.$instanceof(zul.menu.Menubar)){return a}}return null},_fixBtn:function(){var a=this.getSubnode("b");if(!a||!a.innerHTML.trim()){return}if(!this._textUtil){this._textUtil=zDom.getTextUtil()}a.style.width=this._textUtil.measure(a).width+zDom.frameWidth(a)+"px"},bind_:function(){this.$supers("bind_",arguments);if(!this.isTopmost()){var a=this.getSubnode("a"),b=this.getNode();zEvt.listen(a,"focus",this.proxy(this.domFocus_,"_fxFocus"));zEvt.listen(a,"blur",this.proxy(this.domBlur_,"_fxBlur"));zEvt.listen(b,"mouseover",this.proxy(this._doMouseOver,"_fxMouseOver"));zEvt.listen(b,"mouseout",this.proxy(this._doMouseOut,"_fxMouseOut"))}else{if(zk.ie){this._fixBtn()}var a=this.getSubnode("a");zEvt.listen(a,"mouseover",this.proxy(this._doMouseOver,"_fxMouseOver"));zEvt.listen(a,"mouseout",this.proxy(this._doMouseOut,"_fxMouseOut"))}},unbind_:function(){if(!this.isTopmost()){var a=this.getSubnode("a"),b=this.getNode();zEvt.unlisten(a,"focus",this._fxFocus);zEvt.unlisten(a,"blur",this._fxBlur);zEvt.unlisten(b,"mouseover",this._fxMouseOver);zEvt.unlisten(b,"mouseout",this._fxMouseOut)}else{if(this._textUtil){this._textUtil.destroy()}this._textUtil=null;var b=this.getNode();zEvt.unlisten(b,"mouseover",this._fxMouseOver);zEvt.unlisten(b,"mouseout",this._fxMouseOut)}this.$supers("unbind_",arguments)},doClick_:function(a){if(this.isTopmost()&&!zDom.isAncestor(this.getSubnode("a"),a.nativeTarget)){return}zDom.addClass(this.getSubnode("a"),this.getZclass()+"-btn-seld");if(this.menupopup){this.menupopup._shallClose=false;if(this.isTopmost()){this.getMenubar()._lastTarget=this}if(!this.menupopup.isOpen()){this.menupopup.open()}}this.fireX(a)},_doMouseOver:function(a){if(this.$class._isActive(this)){return}var b=this.isTopmost();if(b&&zk.ie&&!zDom.isAncestor(this.getSubnode("a"),zEvt.target(a))){return}this.$class._addActive(this);if(!b){if(this.menupopup){this.menupopup._shallClose=false}zWatch.fire("onFloatUp",null,this);if(this.menupopup&&!this.menupopup.isOpen()){this.menupopup.open()}}else{var c=this.getMenubar();if(this.menupopup&&c.isAutodrop()){c._lastTarget=this;this.menupopup._shallClose=false;zWatch.fire("onFloatUp",null,this);if(!this.menupopup.isOpen()){this.menupopup.open()}}else{var d=c._lastTarget;if(d&&d!=this&&c._lastTarget.menupopup&&c._lastTarget.menupopup.isVisible()){c._lastTarget.menupopup.close({sendOnOpen:true});this.$class._rmActive(c._lastTarget);c._lastTarget=this;if(this.menupopup){this.menupopup.open()}}}}},_doMouseOut:function(g){if(zk.ie){var b=this.getSubnode("a"),i=zDom.revisedOffset(b),a=zEvt.pointer(g),e=a[0],d=a[1],f=this.isTopmost()?1:0,c=this.isTopmost()&&"vertical"==this.parent.getOrient()?1:0;if(e-f>i[0]&&e<=i[0]+b.offsetWidth&&d-f>i[1]&&d-c<=i[1]+b.offsetHeight){return}}var h=this.isTopmost();if(h){if(this.menupopup&&this.getMenubar().isAutodrop()){this.$class._rmActive(this);if(this.menupopup.isOpen()){this.menupopup._shallClose=true}zWatch.fire("onFloatUp",{timeout:10},this)}}else{if(this.menupopup&&!this.menupopup.isOpen()){this.$class._rmActive(this)}}}},{_isActive:function(c){var b=c.isTopmost(),d=b?c.getSubnode("a"):c.getNode(),a=c.getZclass()+(b?"-btn-over":"-over");return zDom.hasClass(d,a)},_addActive:function(c){var b=c.isTopmost(),d=b?c.getSubnode("a"):c.getNode(),a=c.getZclass()+(b?"-btn-over":"-over");zDom.addClass(d,a);if(!b&&c.parent.parent.$instanceof(zul.menu.Menu)){this._addActive(c.parent.parent)}},_rmActive:function(c){var b=c.isTopmost(),d=b?c.getSubnode("a"):c.getNode(),a=c.getZclass()+(b?"-btn-over":"-over");zDom.rmClass(d,a)}});
(_zkwg=_zkpk.Menu).prototype.className='zul.menu.Menu';_zkmd={};
_zkmd['default']=function(a){var b=this.uuid,c=this.getZclass();if(this.isTopmost()){a.push('<td align="left"',this.domAttrs_(),'><table id="',b,'$a"',zUtl.cellps0,' class="',c,"-btn");if(this.getImage()){a.push(" ",c,"-btn");if(this.getLabel()){a.push("-text")}a.push("-img")}a.push('" style="width: auto;"><tbody><tr><td class="',c,'-btn-l"><i>&nbsp;</i></td><td class="',c,'-btn-m"><em unselectable="on"><button id="',b,'$b" type="button" class="',c,'-btn-text"');if(this.getImage()){a.push(' style="background-image:url(',this.getImage(),')"')}a.push(">",zUtl.encodeXML(this.getLabel()),"</button>");if(this.menupopup){this.menupopup.redraw(a)}a.push('</em></td><td class="',c,'-btn-r"><i>&nbsp;</i></td></tr></tbody></table></td>')}else{a.push("<li",this.domAttrs_(),'><a href="javascript:;" id="',b,'$a" class="',c,"-cnt ",c,'-cnt-img">',this.domContent_(),"</a>");if(this.menupopup){this.menupopup.redraw(a)}a.push("</li>")}};
zkmld(_zkwg,_zkmd);zul.menu.Menuitem=zk.$extends(zul.LabelImageWidget,{_value:"",isCheckmark:function(){return this._checkmark},setCheckmark:function(a){if(this._checkmark!=a){this._checkmark=a;this.rerender()}},setDisabled:function(a){if(this._disabled!=a){this._disabled=a;this.rerender()}},isDisabled:function(){return this._disabled},getValue:function(){return this._value},setValue:function(a){if(!a){a=""}this._value=a},isChecked:function(){return this._checked},setChecked:function(a){if(this._checked!=a){this._checked=a;if(this._checked){this._checkmark=this._checked}var c=this.getNode();if(c&&!this.isTopmost()&&!this.getImage()){var b=this.getZclass();zDom.rmClass(c,b+"-cnt-ck");zDom.rmClass(c,b+"-cnt-unck");if(this._checkmark){zDom.addClass(c,b+(this._checked?"-cnt-ck":"-cnt-unck"))}}}},isAutocheck:function(){return this._autocheck},setAutocheck:function(a){if(this._autocheck!=a){this._autocheck=a}},getHref:function(){return this._href},setHref:function(a){if(this._href!=a){this._href=a;this.rerender()}},getTarget:function(){return this._target},setTarget:function(b){if(this._target!=b){this._target=b;var a=this.getSubnode("a");if(a){if(this.isTopmost()){a=a.parentNode}a.target=this._target}}},isTopmost:function(){return this._topmost},beforeParentChanged_:function(a){this._topmost=a&&!(a.$instanceof(zul.menu.Menupopup))},domClass_:function(c){var b=this.$supers("domClass_",arguments);if(!c||!c.zclass){var a=this.isDisabled()?this.getZclass()+"-disd":"";if(a){b+=(b?" ":"")+a}}return b},getZclass:function(){return this._zclass==null?"z-menu-item":this._zclass},domContent_:function(){var b=zUtl.encodeXML(this.getLabel()),a=this._image;if(!a){a=zAu.comURI("web/img/spacer.gif")}a='<img src="'+a+'" align="absmiddle" class="'+this.getZclass()+'-img"/>';return b?a+" "+b:a},domStyle_:function(b){var a=this.$supers("domStyle_",arguments);return this.isTopmost()?a+"padding-left:4px;padding-right:4px;":a},getMenubar:function(){for(var a=this.parent;a;a=a.parent){if(a.$instanceof(zul.menu.Menubar)){return a}}return null},_fixBtn:function(){var a=this.getSubnode("b");if(!a||!a.innerHTML.trim()){return}if(!this._textUtil){this._textUtil=zDom.getTextUtil()}a.style.width=this._textUtil.measure(a).width+zDom.frameWidth(a)+"px"},bind_:function(){this.$supers("bind_",arguments);if(!this.isDisabled()){var a=this.getSubnode("a"),b=this.getNode();zEvt.listen(b,"mouseover",this.proxy(this._doMouseOver,"_fxMouseOver"));zEvt.listen(b,"mouseout",this.proxy(this._doMouseOut,"_fxMouseOut"));if(this.isTopmost()){zEvt.listen(a,"focus",this.proxy(this.domFocus_,"_fxFocus"));zEvt.listen(a,"blur",this.proxy(this.domBlur_,"_fxBlur"))}}if(zk.ie&&this.isTopmost()){this._fixBtn()}},unbind_:function(){if(!this.isDisabled()){var a=this.getSubnode("a"),b=this.getNode();zEvt.unlisten(b,"mouseover",this._fxMouseOver);zEvt.unlisten(b,"mouseout",this._fxMouseOut);if(this.isTopmost()){zEvt.unlisten(a,"focus",this._fxFocus);zEvt.unlisten(a,"blur",this._fxBlur)}}if(this._textUtil){this._textUtil.destroy()}this._textUtil=null;this.$supers("unbind_",arguments)},doClick_:function(a){if(this._disabled){a.stop()}else{if(!this.$class._isActive(this)){return}var b=this.isTopmost(),c=this.getSubnode("a");if(b){zDom.rmClass(c,this.getZclass()+"-btn-over");c=c.parentNode}if("javascript:;"==c.href){if(this.isAutocheck()){this.setChecked(!this.isChecked());this.fire("onCheck",this.isChecked())}this.fireX(a)}else{if(zk.ie&&b&&this.getNode().id!=c.id){zUtl.go(c.href,false,c.target)}}zWatch.fire("onFloatUp",null,this)}},_doMouseOver:function(a){if(this.$class._isActive(this)){return}if(!this.isDisabled()){if(this.isTopmost()&&zk.ie&&!zDom.isAncestor(this.getSubnode("a"),zEvt.target(a))){return}this.$class._addActive(this);zWatch.fire("onFloatUp",null,this)}},_doMouseOut:function(b){if(!this.isDisabled()){if(zk.ie){var g=this.getSubnode("a"),e=zDom.revisedOffset(g),d=zEvt.pointer(b),a=d[0],f=d[1],c=this.isTopmost()?1:0;if(a-c>e[0]&&a<=e[0]+g.offsetWidth&&f-c>e[1]&&f<=e[1]+g.offsetHeight){return}}this.$class._rmActive(this)}}},{_isActive:function(c){var b=c.isTopmost(),d=b?c.getSubnode("a"):c.getNode(),a=c.getZclass()+(b?"-btn-over":"-over");return zDom.hasClass(d,a)},_addActive:function(c){var b=c.isTopmost(),d=b?c.getSubnode("a"):c.getNode(),a=c.getZclass()+(b?"-btn-over":"-over");zDom.addClass(d,a);if(!b&&c.parent.parent.$instanceof(zul.menu.Menu)){this._addActive(c.parent.parent)}},_rmActive:function(c){var b=c.isTopmost(),d=b?c.getSubnode("a"):c.getNode(),a=c.getZclass()+(b?"-btn-over":"-over");zDom.rmClass(d,a)}});
(_zkwg=_zkpk.Menuitem).prototype.className='zul.menu.Menuitem';_zkmd={};
_zkmd['default']=function(b){var c=this.uuid,d=this.getZclass();if(this.isTopmost()){b.push('<td align="left"',this.domAttrs_(),'><a href="',this.getHref()?this.getHref():"javascript:;",'"');if(this.getTarget()){b.push(' target="',this.getTarget(),'"')}b.push(' class="',d,'-cnt"><table id="',c,'$a"',zUtl.cellps0,' class="',d,"-btn");if(this.getImage()){b.push(" ",d,"-btn");if(this.getLabel()){b.push("-text")}b.push("-img")}b.push('" style="width: auto;"><tbody><tr><td class="',d,'-btn-l"><i>&nbsp;</i></td><td class="',d,'-btn-m"><em unselectable="on"><button id="',c,'$b" type="button" class="',d,'-btn-text"');if(this.getImage()){b.push(' style="background-image:url(',this.getImage(),')"')}b.push(">",zUtl.encodeXML(this.getLabel()),'</button></em></td><td class="',d,'-btn-r"><i>&nbsp;</i></td></tr></tbody></table></a></td>')}else{b.push("<li",this.domAttrs_(),">");var a=d+"-cnt"+(!this.getImage()&&this.isCheckmark()?" "+d+(this.isChecked()?"-cnt-ck":"-cnt-unck"):"");b.push('<a href="',this.getHref()?this.getHref():"javascript:;",'"');if(this.getTarget()){b.push(' target="',this.getTarget(),'"')}b.push(' id="',c,'$a" class="',a,'">',this.domContent_(),"</a></li>")}};
zkmld(_zkwg,_zkmd);zul.menu.Menuseparator=zk.$extends(zul.Widget,{isPopup:function(){return this.parent&&this.parent.$instanceof(zul.menu.Menupopup)},getMenubar:function(){for(var a=this.parent;a;a=a.parent){if(a.$instanceof(zul.menu.Menubar)){return a}}return null},getZclass:function(){return this._zclass==null?"z-menu-separator":this._zclass},doMouseOver_:function(){zWatch.fire("onFloatUp",null,this);this.$supers("doMouseOver_",arguments)}});
(_zkwg=_zkpk.Menuseparator).prototype.className='zul.menu.Menuseparator';_zkmd={};
_zkmd['default']=function(a){a.push("<li",this.domAttrs_(),'><span class="',this.getZclass(),'-inner">&nbsp;</span></li>')};
zkmld(_zkwg,_zkmd);zul.menu.Menupopup=zk.$extends("zul.wgt.Popup",{_curIndex:-1,_getCurrentIndex:function(){return this._curIndex},getZclass:function(){return this._zclass==null?"z-menu-popup":this._zclass},getSelectedItem:function(){return this.getSelectedItemAt(this.getSelectedIndex())},_isActiveItem:function(a){return a.isVisible()&&(a.$instanceof(zul.menu.Menu)||(a.$instanceof(zul.menu.Menuitem)&&!a.isDisabled()))},_currentChild:function(c){var c=c!=null?c:this._curIndex;for(var a=this.firstChild,b=-1;a;a=a.nextSibling){if(this._isActiveItem(a)&&++b===c){return a}}return null},_previousChild:function(b){b=b?b.previousSibling:this.lastChild;var a=this.lastChild==b;for(;b;b=b.previousSibling){if(this._isActiveItem(b)){this._curIndex--;return b}}if(a){return null}this.curIndex=0;for(b=this.firstChild;b;b=b.nextSibling){if(this._isActiveItem(b)){this._curIndex++}}return this._previousChild()},_nextChild:function(b){b=b?b.nextSibling:this.firstChild;var a=this.firstChild==b;for(;b;b=b.nextSibling){if(this._isActiveItem(b)){this._curIndex++;return b}}if(a){return null}this._curIndex=-1;return this._nextChild()},_syncShadow:function(){if(!this._shadow){this._shadow=new zk.eff.Shadow(this.getNode(),{stackup:zk.ie6Only})}this._shadow.sync()},_hideShadow:function(){if(this._shadow){this._shadow.hide()}},close:function(){this.$supers("close",arguments);this._hideShadow();var b=this.parent;if(b.$instanceof(zul.menu.Menu)&&b.isTopmost()){zDom.rmClass(b.getSubnode("a"),b.getZclass()+"-btn-seld")}var a=this._currentChild();if(a){a.$class._rmActive(a)}this._curIndex=-1;this.$class._rmActive(this)},open:function(c,d,a,b){if(this.parent.$instanceof(zul.menu.Menu)){if(!d){c=this.parent.getSubnode("a");if(!a){if(this.parent.isTopmost()){a=this.parent.parent.getOrient()=="vertical"?"end_before":"after_start"}else{a="end_before"}}}}this.$super("open",c,d,a,b)},onFloatUp:function(c){if(!this.isVisible()){return}var d=c;if(this.parent.menupopup==this&&!this.parent.isTopmost()&&!this.parent.$class._isActive(this.parent)){this.close({sendOnOpen:true});return}for(var b;c;c=c.parent){if(c==this||(c.menupopup==this&&!this._shallClose)){if(!b){this.setTopmost()}return}b=b||c.isFloating_()}for(var b,c=this.parent;c;c=c.parent){if(c==d){if(this._shallClose){break}if(!b){this.setTopmost()}return}b=b||c.isFloating_()}if(!this._shallClose&&this.parent.$instanceof(zul.menu.Menu)){var a=this.parent.getMenubar();if(a&&a._lastTarget==this.parent){return}}this.close({sendOnOpen:true})},onVisible:function(d){if(zk.ie7){var a=this.getNode();if(!a.style.width){var b=this.getSubnode("cave");a.style.width=b.offsetWidth+zDom.frameWidth(a)+"px"}}this._syncShadow();var c=this.getSubnode("a");if(c){if(zk.ie){zDom.cleanVisibility(this.getNode())}c.focus()}},onHide:function(a){this._hideShadow()},bind_:function(){this.$supers("bind_",arguments);zWatch.listen("onHide",this)},unbind_:function(){if(this._shadow){this._shadow.destroy()}this._shadow=null;zWatch.unlisten("onHide",this);this.$supers("unbind_",arguments)},doKeyDown_:function(d){var c=this._currentChild(),a=d.data.keyCode;switch(a){case 38:case 40:if(c){c.$class._rmActive(c)}c=a==38?this._previousChild(c):this._nextChild(c);if(c){c.$class._addActive(c)}break;case 37:this.close();if(this.parent.$instanceof(zul.menu.Menu)&&!this.parent.isTopmost()){var b=this.parent.parent;if(b){var e=b.getSubnode("a");if(e){e.focus()}}}break;case 39:if(c&&c.$instanceof(zul.menu.Menu)&&c.menupopup){c.menupopup.open()}break;case 13:if(c&&c.$instanceof(zul.menu.Menuitem)){c.doClick_(new zk.Event(c,"onClick",null,{ctl:true},d.nativeEvent));zWatch.fire("onFloatUp",null,c);this.close({sendOnOpen:true})}break}d.stop();this.$supers("doKeyDown_",arguments)},doMouseOver_:function(a){this._shallClose=false;this.$supers("doMouseOver_",arguments)},doMouseOut_:function(a){this._shallClose=true;this.$supers("doMouseOut_",arguments)}},{_rmActive:function(a){if(a.parent.$instanceof(zul.menu.Menu)){a.parent.$class._rmActive(a.parent);if(!a.parent.isTopmost()){this._rmActive(a.parent.parent)}}}});
(_zkwg=_zkpk.Menupopup).prototype.className='zul.menu.Menupopup';_zkmd={};
_zkmd['default']=function(c){var d=this.uuid,e=this.getZclass(),b=zk.ie||zk.gecko?"a":"button";c.push("<div",this.domAttrs_(),"><",b,' id="',d,'$a" tabindex="-1" onclick="return false;" href="javascript:;"',' style="padding:0 !important; margin:0 !important; border:0 !important;'," background: transparent !important; font-size: 1px !important;"," width: 1px !important; height: 1px !important;-moz-outline: 0 none;",' outline: 0 none;	-moz-user-select: text; -khtml-user-select: text;"></',b,'><ul class="',e,'-cnt" id="',d,'$cave">');for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(c)}c.push("</ul></div>")};
zkmld(_zkwg,_zkmd);
}finally{zPkg.end(_z);}}